<h1>Productos</h1>

<a href="/carts/{{cid}}" style="display: inline-block; margin-bottom: 20px;">Ver Carrito Actual</a>

<div class="products-container" style="display: flex; flex-wrap: wrap; gap: 20px;">
  {{#each products.docs}}
    <div class="product-card" style="border: 1px solid #ccc; padding: 10px; width: 250px;">
      <h3>{{this.title}}</h3>
      <p><strong>Descripción:</strong> {{this.description}}</p>
      <p><strong>Precio:</strong> ${{this.price}}</p>
      <p><strong>Stock:</strong> {{this.stock}}</p>

      <button 
        class="add-to-cart-btn" 
        data-pid="{{this._id}}" 
        data-cid="{{../cid}}"
      >
        Agregar al carrito
      </button>

      <br />
      <a href="/product/{{this._id}}">Ver producto</a>
    </div>
  {{/each}}
</div>

<!-- Paginación -->
<div style="margin-top: 30px;">
  {{#if products.hasPrevPage}}
    <a href="/?page={{products.prevPage}}">Página anterior</a>
  {{/if}}

  <span> Página {{products.page}} de {{products.totalPages}} </span>

  {{#if products.hasNextPage}}
    <a href="/?page={{products.nextPage}}">Página siguiente</a>
  {{/if}}
</div>

<!-- Scripts para WebSockets y agregar al carrito -->
<script src="/socket.io/socket.io.js"></script>
<script src="/js/socketClient.js"></script>
<script src="/js/addToCart.js"></script>

